{% extends "::base.html.twig" %}
{% block title %}Editar niño{% endblock %}
{% block css %}
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
{% endblock %}
{% block body %}
<div class="row mb-10">
	<div class="col-md-6">
	{% if back %}
		<a href="{{path ('childs_edit',{'id':back[0].id})}}" class="btn btn-warning center-block next-back-btn">Anterior</a>
	{% endif %}
	</div>
	<div class="col-md-6">
	{% if next %}
		<a href="{{path ('childs_edit',{'id':next[0].id})}}" class="btn btn-success center-block next-back-btn">Siguiente</a>
	{% endif %}
	</div>
</div>
<div class="panel panel-default">
	<div class="panel-heading">Editar Niño</div>
	<div class="panel-body">
		<form method="post" enctype="multipart/form-data" >
			<div class="col-md-8">
				<div class="row">
					<div class="col-md-4"><label for="">Nombre</label><input required id="name" value="{{child.name}}" class="form-control" name="name" type="text"></div>
					<div class="col-md-4"><label for="">Fecha de Nacimiento</label><input required value="{{child.birthday| date('Y-m-d')}}" name="date" class="form-control" type="date"></div>
					<div class="col-md-4"><label for="">Telefono</label><input required id="phone" value="{{child.phone}}" name="phone" class="form-control" type="text"></div>
					<div class="col-md-12"><label for="">Email</label><input required id="email" value="{{child.email}}" name="email" class="form-control" type="text"></div>
					<div class="col-md-12"><label for="">Direccion</label><input required value="{{child.address}}" type="text" name="address" class="form-control" id="searchTextField"></div>
					<div class="col-md-12">
						<div class="col-md-6"><label for="">Lat</label><input value="{{child.lat}}" name="lat" readonly type="text" class="MapLat form-control"></div>
						<div class="col-md-6"><label for="">Long</label><input value="{{child.lng}}" name="lng" readonly type="text" class="MapLon form-control"></div>
					</div>
					<div class="col-md-12">
						<div id="map_canvas" style="height: 200px;width: 100%;margin: 0.6em; margin-right: 20px"></div>
					</div>
					<div class="col-md-6"><label for="">Barrio</label><input required value="{{child.barrio}}" name="barrio" class="form-control" type="text"></div>
					<div class="col-md-6"><label for="">Nombre padres</label><input required id="parents" value="{{child.parents}}" name="parents" class="form-control" type="text"></div>
					<div class="col-md-6"><label for="">Grado</label>
						<select name="grade" class="form-control" id="">
							<option {% if child.grade %}selected{% endif %} value="A">A</option>
							<option {% if child.grade %}selected{% endif %} value="B">B</option>
							<option {% if child.grade %}selected{% endif %} value="C">C</option>
						</select>
					</div>
					<div class="col-md-6"><label for="">Grupo</label>
						<select name="grupo" class="form-control" id="">
							{% for grupo in grupos %}
							<option {% if child.grupo %}selected{% endif %} value="{{grupo.id}}">{{grupo.name}}</option>
							{% endfor %}
						</select>
					</div>
					<div class="col-md-6"><label for="">Colegio</label>
						<input class="form-control" name="colegio" value="{{child.colegio}}" type="text">
					</div>
					<div class="col-md-6"><label for="">Ruta</label>
						<select name="institute" class="form-control" id="">
							{% for route in routes %}
							<option {% if child.route %}selected{% endif %} value="{{route.id}}">{{route.name}}</option>
							{% endfor %}
						</select>
					</div>
					<div class="col-md-6"><label for="">Telefonero</label>
						<select name="telefonero" class="form-control" id="">
							{% for telefonero in telefoneros %}
							<option {% if child.telefonero %}selected{% endif %} value="{{telefonero.id}}">{{telefonero.name}}</option>
							{% endfor %}
						</select>
					</div>
					<div class="checkbox col-md-6"><label class="activo"><input class="form-control" name="active"  type="checkbox">Activo</label></div>
					<div class="col-md-12"><label for="">Observaciones</label><textarea name="observations" class="form-control" id="" cols="5" rows="2">{{child.observations}}</textarea></div>
					<div class="col-md-12 mt-10"><button class="btn btn-success m-r-10">Editar</button></div>
				</div>
			</div>
			<div class="col-md-4">
				<div class="col-md-12 image"><img id="imgSalida" width="280" src="{{ asset ('img/childs/'~child.image)}}" /></div>
				<div class="col-md-12 mb-10"><input class="form-control" name="image" id="file-input" type="file" /></div>
				<div class="col-md-12"><label for="">Comentarios</label><textarea  name="comments" class="form-control" id="" cols="5" rows="2">{{child.comments}}</textarea></div>
				<div class="panel panel-default">
					<div class="panel-body ">
						<div class="col-md-4 mr-10"><div class="checkbox col-md-6"><label><input name="recojer[]" value="4" {% if 4 in child.recojer %} checked {% endif %}  type="checkbox">Recojer viernes</label></div></div>
						<div class="col-md-4 mr-10"><div class="checkbox col-md-6"><label><input name="recojer[]" value="5" {% if 5 in child.recojer %} checked {% endif %}  type="checkbox">Recojer sabado</label></div></div>
						<div class="col-md-4 mr-10"><div class="checkbox col-md-6"><label><input name="recojer[]" value="6" {% if 6 in child.recojer %} checked {% endif %}  type="checkbox">Recojer domingo</label></div></div>

						<div class="col-md-4 mr-10"><div class="checkbox col-md-6"><label><input name="confirmar[]" value="4" {% if 4 in child.confirmar %} checked {% endif %}  type="checkbox">Confirmar viernes</label></div></div>
						<div class="col-md-4 mr-10"><div class="checkbox col-md-6"><label><input name="confirmar[]" value="5" {% if 5 in child.confirmar %} checked {% endif %}  type="checkbox">Confirmar sabado</label></div></div>
						<div class="col-md-4 mr-10"><div class="checkbox col-md-6"><label><input name="confirmar[]" value="6" {% if 6 in child.confirmar %} checked {% endif %}  type="checkbox">Confirmar domingo</label></div></div>

						<div class="col-md-4 mr-10"><div class="checkbox col-md-6"><label><input name="llega[]" value="4" {% if 4 in child.llega %} checked {% endif %}  type="checkbox">Llega viernes</label></div></div>
						<div class="col-md-4 mr-10"><div class="checkbox col-md-6"><label><input name="llega[]" value="5" {% if 5 in child.llega %} checked {% endif %}  type="checkbox">Llega sabado</label></div></div>
						<div class="col-md-4 mr-10"><div class="checkbox col-md-6"><label><input name="llega[]" value="6" {% if 6 in child.llega %} checked {% endif %}  type="checkbox">Llega domingo</label></div></div>

						<div class="col-md-4 mr-10"><div class="checkbox col-md-6"><label><input name="noViene[]" value="4" {% if 4 in child.noViene %} checked {% endif %}  type="checkbox">No viene viernes</label></div></div>
						<div class="col-md-4 mr-10"><div class="checkbox col-md-6"><label><input name="noViene[]" value="5" {% if 5 in child.noViene %} checked {% endif %}  type="checkbox">No viene sabado</label></div></div>
						<div class="col-md-4 mr-10"><div class="checkbox col-md-6"><label><input name="noViene[]" value="6" {% if 6 in child.noViene %} checked {% endif %}  type="checkbox">No viene domingo</label></div></div>
					</div>
				</div>
			</div>
		</form>
	</div>
</div>
{% endblock %}

{% block javascripts %}
<script src="http://maps.google.com/maps/api/js?key=AIzaSyCx5syL0jRIx6U17sIZlBb7QnC2ly1UMtc&libraries=places&region=uk&language=en&sensor=true"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
{# Google Api key #}
{# Script Mapa #}
<script src="{{ asset ('js/googleMapsEdit.js')}}"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script>
$( function() {
	//autocompletar
    var availableNames = {{childNames | json_encode | raw}};
    var availablePhones = {{childPhones | json_encode | raw}};
    var availableEmails = {{childEmails | json_encode | raw}};
    var availableParents = {{childParents | json_encode | raw}};
    $( "#name" ).autocomplete({
      source: availableNames
    });
    $( "#phone" ).autocomplete({
      source: availablePhones
    });
    $( "#email" ).autocomplete({
      source: availableEmails
    });
    $( "#parents" ).autocomplete({
      source: availableParents
    });
  } );
// Mostrar imagenes
$(window).on('load' ,function(){

	$(function() {
		$('#file-input').change(function(e) {
			addImage(e); 
		});

		function addImage(e){
			var file = e.target.files[0],
			imageType = /image.*/;

			if (!file.type.match(imageType))
				return;

			var reader = new FileReader();
			reader.onload = fileOnload;
			reader.readAsDataURL(file);
		}

		function fileOnload(e) {
			var result=e.target.result;
			$('#imgSalida').attr("src",result);
		}
	});
});
</script>
{% endblock %}
